<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Build a Pritunl Slack Slash Commands with a Serverless Backend" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://nathaniel.varona.me/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/" /><meta property="og:url" content="https://nathaniel.varona.me/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/" /><meta property="og:site_name" content="Nathaniel Varona" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-04-28T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Build a Pritunl Slack Slash Commands with a Serverless Backend" /><meta name="twitter:site" content="@nathanielvarona" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-08-28T12:32:23+08:00","datePublished":"2023-04-28T00:00:00+08:00","description":"Introduction","headline":"Build a Pritunl Slack Slash Commands with a Serverless Backend","mainEntityOfPage":{"@type":"WebPage","@id":"https://nathaniel.varona.me/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/"},"url":"https://nathaniel.varona.me/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/"}</script><title>Build a Pritunl Slack Slash Commands with a Serverless Backend | Nathaniel Varona</title><link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-7S51SBJX8F"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-7S51SBJX8F'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/favicons/android-chrome-512x512.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Nathaniel Varona</a><p class="site-subtitle fst-italic mb-0">I am a DevOps and SRE focussing on Cloud Computing and Distributed Systems.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/nathanielvarona" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/nathanielvarona" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-x-twitter"></i> </a> <a href="https://www.linkedin.com/in/nathanielvarona" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Build a Pritunl Slack Slash Commands with a Serverless Backend</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Build a Pritunl Slack Slash Commands with a Serverless Backend</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1682611200" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 28, 2023 </time> </span> <span> Updated <time data-ts="1724819543" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Aug 28, 2024 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/nathanielvarona">Nathaniel Varona</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1378 words" > <em>7 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Build a Pritunl Slack Slash Commands with a Serverless Backend</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Build a Pritunl Slack Slash Commands with a Serverless Backend</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="introduction"><span class="me-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>For self-service automation, Slack is one of the leading platforms that it can provide. As DevOps, which also considers company administrators, we ensure team members, such as Developers or QA, are presented with their technical needs without always relying on us.</p><p>In this post, we will build and deploy a Slack Slash Command for Pritunl Enterprise VPN users so they can generate their VPN Profile and Keys to access the organizationâ€™s resources.</p><h2 id="quick-demo"><span class="me-2">Quick Demo</span><a href="#quick-demo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="/assets/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/pritunl-slack-profile-key-dark.gif" class="popup img-link dark shimmer"><img src="/assets/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/pritunl-slack-profile-key-dark.gif" alt="Pritunl Slack Profile Key" class="shadow" loading="lazy"></a> <a href="/assets/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/pritunl-slack-profile-key-light.gif" class="popup img-link light shimmer"><img src="/assets/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/pritunl-slack-profile-key-light.gif" alt="Pritunl Slack Profile Key" class="shadow" loading="lazy"></a> <em>Figure 1: Pritunl Slack Slash Commands Application</em></p><h2 id="slack-app-setup"><span class="me-2">Slack App Setup</span><a href="#slack-app-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="create-a-new-slack-application"><span class="me-2">Create a new <code class="language-plaintext highlighter-rouge">Slack application</code></span><a href="#create-a-new-slack-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Go to <strong><a href="https://api.slack.com/">Slack API</a></strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong><a href="https://api.slack.com/apps">Your Apps</a></strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Create New App</strong>.</p><h3 id="create-an-app-steps"><span class="me-2">Create an app Steps</span><a href="#create-an-app-steps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>From <strong>Create an app</strong> pop-up window <code class="language-plaintext highlighter-rouge">-&gt;</code> choose <strong>From an app manifest</strong>.</p><h4 id="step-1-pick-a-workspace-to-develop-your-app"><span class="me-2"><strong>Step 1:</strong> Pick a workspace to develop your app</span><a href="#step-1-pick-a-workspace-to-develop-your-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Pick a <strong>Workspace</strong> to develop your app in. Then proceed to next step.</p><h4 id="step-2-enter-app-manifest-below"><span class="me-2"><strong>Step 2:</strong> Enter app manifest below</span><a href="#step-2-enter-app-manifest-below" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The App manifest contains basic info, scopes, settings, and features.</p><p>Choose the <strong>YAML</strong> option, then copy and paste the code provided for you.</p><div class="language-yml nolineno highlighter-rouge" file="App manifest"><div class="code-header"> <span data-label-text="App manifest"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="na">display_information</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">Pritunl</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s">Pritunl</span>
  <span class="na">background_color</span><span class="pi">:</span> <span class="s2">"</span><span class="s">#737373"</span>
<span class="na">features</span><span class="pi">:</span>
  <span class="na">bot_user</span><span class="pi">:</span>
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">Pritunl</span>
    <span class="na">always_online</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">slash_commands</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">command</span><span class="pi">:</span> <span class="s">/pritunl</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Pritunl</span>
      <span class="na">should_escape</span><span class="pi">:</span> <span class="kc">false</span>

      <span class="c1">## Replace the URL with the actual endpoint later after Serverless backend deployment.</span>
      <span class="na">url</span><span class="pi">:</span> <span class="s">https://url-id.lambda-url.us-east-1.on.aws/</span>

<span class="na">oauth_config</span><span class="pi">:</span>
  <span class="na">scopes</span><span class="pi">:</span>
    <span class="na">bot</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">commands</span>
      <span class="pi">-</span> <span class="s">users:read</span>
      <span class="pi">-</span> <span class="s">users:read.email</span>
<span class="na">settings</span><span class="pi">:</span>
  <span class="na">org_deploy_enabled</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">socket_mode_enabled</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">token_rotation_enabled</span><span class="pi">:</span> <span class="kc">false</span>
</pre></table></code></div></div><p>Once fill-in and without syntax or definition errors, proceed to next step.</p><h4 id="step-3-review-summary--create-your-app"><span class="me-2"><strong>Step 3:</strong> Review summary &amp; create your app</span><a href="#step-3-review-summary--create-your-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Based on the YAML manifest from our previous step, inspect the <code class="language-plaintext highlighter-rouge">OAuth</code> and <code class="language-plaintext highlighter-rouge">Features</code> that suit our requirements, and finalize the app creation steps by clicking the <strong>Create</strong> button.</p><h4 id="improve-app-visual-identity-optional"><span class="me-2">Improve App Visual Identity <em>(Optional)</em></span><a href="#improve-app-visual-identity-optional" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>For our application to have a unique visual identity from the rest of our apps, we can change the app icon.</p><p>From the <strong>Pritunl</strong> app, go to <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Settings</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Basic Information</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>App Credentials</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Display Information</strong>.</p><p>Download the <a href="https://raw.githubusercontent.com/pritunl/pritunl-artwork/master/logos/logo512.png">Pritunl Icon</a> and, upload it to the <strong>App icon &amp; Preview</strong></p><h3 id="prepare-the-slack-credentials"><span class="me-2">Prepare the Slack Credentials</span><a href="#prepare-the-slack-credentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We only need the <code class="language-plaintext highlighter-rouge">Signing Secret</code> and <code class="language-plaintext highlighter-rouge">Bot Token</code>. Then steps on how to obtain these.</p><h4 id="getting-the-signing-secret"><span class="me-2">Getting the <strong>Signing Secret</strong></span><a href="#getting-the-signing-secret" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>From the <strong>Pritunl</strong> app, go to <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Settings</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Basic Information</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>App Credentials</strong>.</p><p>Then, click the <strong>Show</strong> button in the <code class="language-plaintext highlighter-rouge">Signing Secret</code> field to suppress the information and copy it for our Serverless backend deployment.</p><h4 id="getting-the-bot-token"><span class="me-2">Getting the <strong>Bot Token</strong></span><a href="#getting-the-bot-token" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>From the <strong>Pritunl</strong> app, go to <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Settings</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Basic Information</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Install App</strong>.</p><p>Then on the <strong>Install App to Your Team</strong> page, click the <strong>Install to Workspace</strong>.</p><p>Review the app requesting permission to access our workspace, then click <strong>Allow</strong>.</p><p>Once installed in our workspace, the field <code class="language-plaintext highlighter-rouge">Bot User OAuth Token</code> shows this will be our <code class="language-plaintext highlighter-rouge">Bot Token</code>, which we copy for our Serverless backend deployment.</p><h2 id="deploy-the-serverless-backend"><span class="me-2">Deploy the Serverless Backend</span><a href="#deploy-the-serverless-backend" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="prepare-the-pritunl-credentials"><span class="me-2">Prepare the Pritunl Credentials</span><a href="#prepare-the-pritunl-credentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Before proceeding to Serverless backend deployment, also prepare the Pritunl credentials.</p><p>From the Pritunl Dashboard (Base URL: <a href="https://vpn.domain.tld/">https://vpn.domain.tld/</a>), go to <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Administrators</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Select an Administrator</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> then tick the <strong>Enable Token Authentication</strong>.</p><p>Copy the Pritunl <strong>API Token</strong> and <strong>API Secret</strong>.</p><h3 id="tooling-requirements"><span class="me-2">Tooling Requirements</span><a href="#tooling-requirements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="install-the-aws-sam-cli"><span class="me-2">Install the AWS SAM CLI</span><a href="#install-the-aws-sam-cli" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Make sure you have the latest <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/install-sam-cli.html">AWS SAM CLI</a> installed in your system.</p><h3 id="serverless-backend-deployment"><span class="me-2">Serverless Backend Deployment</span><a href="#serverless-backend-deployment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We will use the GitHub repository <a href="https://github.com/nathanielvarona/pritunl-slack-app">Pritunl Slack App Slash Commands</a> application as our backend for the Slack application.</p><h4 id="deploy-to-aws-lambda"><span class="me-2">Deploy to AWS Lambda</span><a href="#deploy-to-aws-lambda" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/pritunl-slack-demo-dark.gif" class="popup img-link dark shimmer"><img src="/assets/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/pritunl-slack-demo-dark.gif" alt="Pritunl Slack Profile Key" class="shadow" loading="lazy"></a> <a href="/assets/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/pritunl-slack-demo-light.gif" class="popup img-link light shimmer"><img src="/assets/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/pritunl-slack-demo-light.gif" alt="Pritunl Slack Profile Key" class="shadow" loading="lazy"></a> <em>Figure 2: Pritunl Slack Slash Commands Serverless Backend Deployment</em></p><blockquote><p><em>Recorded with <a href="https://asciinema.org/a/586483/?autoplay=1&amp;preload=1&amp;loop=1&amp;theme=asciinema" target="_blank" class="dark">asciinema</a> <a href="https://asciinema.org/a/586483/?autoplay=1&amp;preload=1&amp;loop=1&amp;theme=solarized-light" target="_blank" class="light">asciinema</a></em></p></blockquote><h4 id="clone-the-serverless-backend"><span class="me-2">Clone the Serverless Backend</span><a href="#clone-the-serverless-backend" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-bash nolineno highlighter-rouge" file="Clone Project"><div class="code-header"> <span data-label-text="Clone Project"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>git clone https://github.com/nathanielvarona/pritunl-slack-app.git
<span class="nb">cd </span>pritunl-slack-app
</pre></table></code></div></div><h3 id="deploy-using-aws-sam"><span class="me-2">Deploy using AWS SAM</span><a href="#deploy-using-aws-sam" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote class="prompt-info"><p>Make sure you have <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/install-sam-cli.html">AWS SAM CLI</a> installed.</p></blockquote><h4 id="load-the-credentials-as-environment-variables"><span class="me-2">Load the Credentials as Environment Variables</span><a href="#load-the-credentials-as-environment-variables" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-bash nolineno highlighter-rouge" file="Environment Variables"><div class="code-header"> <span data-label-text="Environment Variables"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">PRITUNL_BASE_URL</span><span class="o">=</span><span class="s2">"https://vpn.domain.tld/"</span>
<span class="nb">export </span><span class="nv">PRITUNL_API_SECRET</span><span class="o">=</span><span class="s2">"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span>
<span class="nb">export </span><span class="nv">PRITUNL_API_TOKEN</span><span class="o">=</span><span class="s2">"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span>
<span class="nb">export </span><span class="nv">SLACK_SIGNING_SECRET</span><span class="o">=</span><span class="s2">"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span>
<span class="nb">export </span><span class="nv">SLACK_BOT_TOKEN</span><span class="o">=</span><span class="s2">"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span>
</pre></table></code></div></div><h4 id="build-the-serverless-application"><span class="me-2">Build the Serverless Application</span><a href="#build-the-serverless-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote class="prompt-tip"><p>The flag <code class="language-plaintext highlighter-rouge">--use-container</code> only works if <a href="https://www.docker.com/products/docker-desktop/">Docker</a> is installed. This method prevents failing builds and packaging issues and promotes the highest runtime compatibility on the serverless environment once deployed.</p></blockquote><div class="language-bash nolineno highlighter-rouge" file="SAM Build"><div class="code-header"> <span data-label-text="SAM Build"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sam build <span class="nt">--use-container</span> <span class="nt">--no-cached</span>
</pre></table></code></div></div><details> <summary>Show Stdout</summary><figure class="highlight"><pre><code class="language-text" data-lang="text">  Starting Build inside a container
  Building codeuri: .../pritunl-slack-app/pritunl_slack_app/function runtime: python3.10 metadata: {} architecture: x86_64 functions: PritunlSlackFunction
  
  Fetching public.ecr.aws/sam/build-python3.10:latest-x86_64 Docker container image......
  Mounting .../pritunl-slack-app/pritunl_slack_app/function as /tmp/samcli/source:ro,delegated, inside runtime container
  Running PythonPipBuilder:ResolveDependencies
  Running PythonPipBuilder:CopySource
  
  Build Succeeded
  
  Built Artifacts  : .aws-sam/build
  Built Template   : .aws-sam/build/template.yaml
  
  Commands you can use next
  =========================
  [*] Validate SAM template: sam validate
  [*] Invoke Function: sam local invoke
  [*] Test Function in the Cloud: sam sync --stack-name  --watch
  [*] Deploy: sam deploy --guided
  </code></pre></figure></details><h4 id="lets-deploy-the-application"><span class="me-2">Lets deploy the application</span><a href="#lets-deploy-the-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote class="prompt-warning"><p>The flag <code class="language-plaintext highlighter-rouge">--no-confirm-changeset</code> will automatically deploy the application without reviews.</p></blockquote><div class="language-bash nolineno highlighter-rouge" file="SAM Deploy"><div class="code-header"> <span data-label-text="SAM Deploy"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>sam deploy <span class="nt">--no-confirm-changeset</span> <span class="nt">--parameter-overrides</span> <span class="s2">"</span><span class="se">\</span><span class="s2">
  PritunlBaseUrl=</span><span class="k">${</span><span class="nv">PRITUNL_BASE_URL</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  PritunlApiSecret=</span><span class="k">${</span><span class="nv">PRITUNL_API_SECRET</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  PritunlApiToken=</span><span class="k">${</span><span class="nv">PRITUNL_API_TOKEN</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  SlackSigningSecret=</span><span class="k">${</span><span class="nv">SLACK_SIGNING_SECRET</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  SlackBotToken=</span><span class="k">${</span><span class="nv">SLACK_BOT_TOKEN</span><span class="k">}</span><span class="s2">"</span>
</pre></table></code></div></div><details> <summary>Show Stdout</summary><figure class="highlight"><pre><code class="language-text" data-lang="text">      Managed S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-XXXXXXXXXXXXX
      A different default S3 bucket can be set in samconfig.toml
      Or by specifying --s3-bucket explicitly.
    Uploading to pritunl-slack-app/285144b7022df545f09fb472228be5a9  1073 / 1073  (100.00%)
    Uploading to pritunl-slack-app/76f170eb0196cbb12a272dfde42894c7  899 / 899  (100.00%)
    Uploading to pritunl-slack-app/1ba998885207ab33f89be0e16954258a  1104939 / 1104939  (100.00%)
  
    Deploying with following values
    ===============================
    Stack name                   : pritunl-slack-app
    Region                       : us-east-1
    Confirm changeset            : False
    Disable rollback             : False
    Deployment s3 bucket         : aws-sam-cli-managed-default-samclisourcebucket-XXXXXXXXXXXXX
    Capabilities                 : ["CAPABILITY_IAM"]
    Parameter overrides          : {"PritunlBaseUrl": "*****", "PritunlApiSecret": "*****", "PritunlApiToken": "*****", "SlackSigningSecret": "*****", "SlackBotToken": "*****"}
    Signing Profiles             : {}
  
  Initiating deployment
  =====================
  
    Uploading to pritunl-slack-app/c1d1651005d8166da9b4e6fd66f52f6b.template  5546 / 5546  (100.00%)
  
  
  Waiting for changeset to be created..
  
  CloudFormation stack changeset
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Operation                                    LogicalResourceId                            ResourceType                                 Replacement
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  + Add                                        AWSPritunlBaseUrl                            AWS::SecretsManager::Secret                  N/A
  + Add                                        AWSSecretPritunlApiSecret                    AWS::SecretsManager::Secret                  N/A
  + Add                                        AWSSecretPritunlApiToken                     AWS::SecretsManager::Secret                  N/A
  + Add                                        AWSSecretSlackBotToken                       AWS::SecretsManager::Secret                  N/A
  + Add                                        AWSSecretSlackSigningSecret                  AWS::SecretsManager::Secret                  N/A
  + Add                                        PritunlSlackFunctionRole                     AWS::IAM::Role                               N/A
  + Add                                        PritunlSlackFunctionUrl                      AWS::Lambda::Url                             N/A
  + Add                                        PritunlSlackFunction                         AWS::Lambda::Function                        N/A
  + Add                                        PritunlSlackUrlFunctionPermissions           AWS::Lambda::Permission                      N/A
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  
  
  Changeset created successfully. arn:aws:cloudformation:us-east-1:############:changeSet/samcli-deploy1682663457/a848f39c-418b-47d9-8227-f6aa79ae2fa7
  
  
  2023-04-28 14:31:07 - Waiting for stack create/update to complete
  
  CloudFormation events from stack operations (refresh every 5.0 seconds)
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ResourceStatus                               ResourceType                                 LogicalResourceId                            ResourceStatusReason
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  CREATE_IN_PROGRESS                           AWS::CloudFormation::Stack                   pritunl-slack-app                            User Initiated
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSSecretSlackBotToken                       -
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSSecretSlackSigningSecret                  -
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSPritunlBaseUrl                            -
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSSecretPritunlApiToken                     -
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSSecretPritunlApiSecret                    -
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSSecretSlackSigningSecret                  Resource creation Initiated
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSSecretSlackBotToken                       Resource creation Initiated
  CREATE_COMPLETE                              AWS::SecretsManager::Secret                  AWSSecretSlackSigningSecret                  -
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSPritunlBaseUrl                            Resource creation Initiated
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSSecretPritunlApiSecret                    Resource creation Initiated
  CREATE_COMPLETE                              AWS::SecretsManager::Secret                  AWSSecretSlackBotToken                       -
  CREATE_IN_PROGRESS                           AWS::SecretsManager::Secret                  AWSSecretPritunlApiToken                     Resource creation Initiated
  CREATE_COMPLETE                              AWS::SecretsManager::Secret                  AWSSecretPritunlApiSecret                    -
  CREATE_COMPLETE                              AWS::SecretsManager::Secret                  AWSPritunlBaseUrl                            -
  CREATE_COMPLETE                              AWS::SecretsManager::Secret                  AWSSecretPritunlApiToken                     -
  CREATE_IN_PROGRESS                           AWS::IAM::Role                               PritunlSlackFunctionRole                     -
  CREATE_IN_PROGRESS                           AWS::IAM::Role                               PritunlSlackFunctionRole                     Resource creation Initiated
  CREATE_COMPLETE                              AWS::IAM::Role                               PritunlSlackFunctionRole                     -
  CREATE_IN_PROGRESS                           AWS::Lambda::Function                        PritunlSlackFunction                         -
  CREATE_IN_PROGRESS                           AWS::Lambda::Function                        PritunlSlackFunction                         Resource creation Initiated
  CREATE_COMPLETE                              AWS::Lambda::Function                        PritunlSlackFunction                         -
  CREATE_IN_PROGRESS                           AWS::Lambda::Permission                      PritunlSlackUrlFunctionPermissions           -
  CREATE_IN_PROGRESS                           AWS::Lambda::Url                             PritunlSlackFunctionUrl                      -
  CREATE_IN_PROGRESS                           AWS::Lambda::Permission                      PritunlSlackUrlFunctionPermissions           Resource creation Initiated
  CREATE_IN_PROGRESS                           AWS::Lambda::Url                             PritunlSlackFunctionUrl                      Resource creation Initiated
  CREATE_COMPLETE                              AWS::Lambda::Url                             PritunlSlackFunctionUrl                      -
  CREATE_COMPLETE                              AWS::Lambda::Permission                      PritunlSlackUrlFunctionPermissions           -
  CREATE_COMPLETE                              AWS::CloudFormation::Stack                   pritunl-slack-app                            -
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  
  CloudFormation outputs from deployed stack
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Outputs
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Key                 PritunlSlackFunction
  Description         Pritunl Slack App Lambda Function ARN
  Value               arn:aws:lambda:us-east-1:############:function:pritunl-slack-app-PritunlSlackFunction-hae24jz29SIN
  
  Key                 PritunlSlackFunctionUrl
  Description         Pritunl Slack App Lambda Function URL
  Value               https://5lxvqp66eussnx4egwg5hz7dme0vbend.lambda-url.us-east-1.on.aws/
  
  Key                 PritunlSlackFunctionIamRole
  Description         Implicit IAM Role created for Pritunl Slack App function
  Value               arn:aws:iam::############:role/pritunl-slack-app-PritunlSlackFunctionRole-XGLNKCQZS3H5
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  
  
  Successfully created/updated stack - pritunl-slack-app in us-east-1
  </code></pre></figure></details><h4 id="modify-our-slack-slash-commands-configuration"><span class="me-2">Modify our Slack Slash Commands configuration.</span><a href="#modify-our-slack-slash-commands-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Copy the value of <code class="language-plaintext highlighter-rouge">PritunlSlackFunctionUrl</code> from our <code class="language-plaintext highlighter-rouge">sam deploy</code> outputs, such as the URL <code class="language-plaintext highlighter-rouge">https://5lxvqp66eussnx4egwg5hz7dme0vbend.lambda-url.us-east-1.on.aws/</code>. Then modify our Slack Slash Commands <a href="#step-2-enter-app-manifest-below">Manifest</a> configuration.</p><p>From the <strong>Pritunl</strong> app, go to <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>Features</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>App Manifest</strong> <code class="language-plaintext highlighter-rouge">-&gt;</code> <strong>YAML</strong>.</p><div class="language-yml nolineno highlighter-rouge" file="App Manifest"><div class="code-header"> <span data-label-text="App Manifest"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="na">features</span><span class="pi">:</span>
  <span class="na">slash_commands</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">url</span><span class="pi">:</span> <span class="s">https://5lxvqp66eussnx4egwg5hz7dme0vbend.lambda-url.us-east-1.on.aws/</span>
</pre></table></code></div></div><p>Modify and <strong>Save Changes</strong>.</p><p>And we are done! We now have a working Pritunl Slack Application, as shown in the <a href="#quick-demo">Quick Demo</a>.</p><h2 id="other-methods-of-deployment"><span class="me-2">Other Methods of Deployment</span><a href="#other-methods-of-deployment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="lambda-functions-using-docker-image-as-a-package-type"><span class="me-2">Lambda Functions Using Docker Image as a Package Type</span><a href="#lambda-functions-using-docker-image-as-a-package-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Only requires few changes for our SAM <code class="language-plaintext highlighter-rouge">template.yaml</code> to work with Docker Image</p><h4 id="patch-the-sam-template"><span class="me-2">Patch the SAM Template</span><a href="#patch-the-sam-template" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Apply the patch file <a href="https://github.com/nathanielvarona/pritunl-slack-app/blob/main/template.yaml.docker-image.patch">template.yaml.docker-image.patch</a> for our <code class="language-plaintext highlighter-rouge">template.yaml</code> using git.</p><div class="language-bash nolineno highlighter-rouge" file="Apply Patch"><div class="code-header"> <span data-label-text="Apply Patch"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git apply ./template.yaml.docker-image.patch
</pre></table></code></div></div><h4 id="build-using-sam-with-extra-parameters"><span class="me-2">Build using SAM with extra Parameters</span><a href="#build-using-sam-with-extra-parameters" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Docker requires extra build arguments to pass the AWS Credentials to download the AWS Parameter and Secrets Lambda extension at the build stage.</p><div class="language-bash nolineno highlighter-rouge" file="SAM Build"><div class="code-header"> <span data-label-text="SAM Build"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>sam build <span class="nt">--use-container</span> <span class="nt">--no-cached</span> <span class="nt">--parameter-overrides</span> <span class="s2">"</span><span class="se">\</span><span class="s2">
  AwsAccessKeyId=</span><span class="k">${</span><span class="nv">AWS_ACCESS_KEY_ID</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  AwsSecretAccessKey=</span><span class="k">${</span><span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="k">}</span><span class="s2">"</span>
</pre></table></code></div></div><h4 id="then-deploy"><span class="me-2">Then Deploy</span><a href="#then-deploy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The same way as how the Zip Package Type deploys.</p><div class="language-bash nolineno highlighter-rouge" file="SAM Deploy"><div class="code-header"> <span data-label-text="SAM Deploy"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>sam deploy <span class="nt">--no-confirm-changeset</span>  <span class="nt">--parameter-overrides</span> <span class="s2">"</span><span class="se">\</span><span class="s2">
  PritunlBaseUrl=</span><span class="k">${</span><span class="nv">PRITUNL_BASE_URL</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  PritunlApiSecret=</span><span class="k">${</span><span class="nv">PRITUNL_API_SECRET</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  PritunlApiToken=</span><span class="k">${</span><span class="nv">PRITUNL_API_TOKEN</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  SlackSigningSecret=</span><span class="k">${</span><span class="nv">SLACK_SIGNING_SECRET</span><span class="k">}</span><span class="s2"> </span><span class="se">\</span><span class="s2">
  SlackBotToken=</span><span class="k">${</span><span class="nv">SLACK_BOT_TOKEN</span><span class="k">}</span><span class="s2">"</span>
</pre></table></code></div></div><h3 id="kubernetes-cluster-with-helm-package-manager"><span class="me-2">Kubernetes Cluster with Helm Package Manager</span><a href="#kubernetes-cluster-with-helm-package-manager" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote class="prompt-tip"><p>If you are in <a href="https://kubernetes.io/">Kubernetes</a> Cluster and highly reliant on <a href="https://helm.sh/">Helm</a> Package Manager, please consider checking the project I also created, the <a href="https://artifacthub.io/packages/helm/pritunl-slack-app/pritunl-slack-app">Pritunl Slack App Helm Chart</a>.</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/pritunl/">Pritunl</a>, <a href="/categories/enterprise-vpn/">Enterprise VPN</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/slack-slash-command/" class="post-tag no-text-decoration" >Slack Slash Command</a> <a href="/tags/slack-application/" class="post-tag no-text-decoration" >Slack Application</a> <a href="/tags/slack-integration/" class="post-tag no-text-decoration" >Slack Integration</a> <a href="/tags/serverless/" class="post-tag no-text-decoration" >Serverless</a> <a href="/tags/aws-sam/" class="post-tag no-text-decoration" >AWS SAM</a> <a href="/tags/aws-lambda-application/" class="post-tag no-text-decoration" >AWS Lambda Application</a> <a href="/tags/python-library/" class="post-tag no-text-decoration" >Python Library</a> <a href="/tags/api-client/" class="post-tag no-text-decoration" >API Client</a> <a href="/tags/pritunl-vpn/" class="post-tag no-text-decoration" >Pritunl VPN</a> <a href="/tags/openvpn/" class="post-tag no-text-decoration" >OpenVPN</a> <a href="/tags/wireguard/" class="post-tag no-text-decoration" >WireGuard</a> <a href="/tags/aws-sam-package-zip/" class="post-tag no-text-decoration" >AWS SAM Package Zip</a> <a href="/tags/aws-sam-package-image/" class="post-tag no-text-decoration" >AWS SAM Package Image</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >Kubernetes</a> <a href="/tags/helm/" class="post-tag no-text-decoration" >Helm</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Build%20a%20Pritunl%20Slack%20Slash%20Commands%20with%20a%20Serverless%20Backend%20-%20Nathaniel%20Varona&url=https%3A%2F%2Fnathaniel.varona.me%2Fposts%2Fbuild-a-pritunl-slack-slash-commands-with-a-serverless-backend%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Build%20a%20Pritunl%20Slack%20Slash%20Commands%20with%20a%20Serverless%20Backend%20-%20Nathaniel%20Varona&u=https%3A%2F%2Fnathaniel.varona.me%2Fposts%2Fbuild-a-pritunl-slack-slash-commands-with-a-serverless-backend%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/feed/?shareActive=true&shareUrl=https%3A%2F%2Fnathaniel.varona.me%2Fposts%2Fbuild-a-pritunl-slack-slash-commands-with-a-serverless-backend%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/">Google Workspace as an external IdP for AWS IAM Identity Center</a><li class="text-truncate lh-lg"> <a href="/posts/automatic-provisioning-of-aws-iam-identity-center-users-and-groups-from-google-workspace-directory-using-sso-sync/">Automatic Provisioning of AWS IAM Identity Center Users and Groups from Google Workspace Directory using SSO Sync</a><li class="text-truncate lh-lg"> <a href="/posts/managing-aws-iam-identity-center-multi-account-permissions-using-terraform-and-github-actions/">Managing AWS IAM Identity Center Multi-Account Permissions using Terraform and GitHub Actions</a><li class="text-truncate lh-lg"> <a href="/posts/managing-enterprise-vpn-using-pritunl-api-cli/">Managing Enterprise VPN using Pritunl API CLI</a><li class="text-truncate lh-lg"> <a href="/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/">Build a Pritunl Slack Slash Commands with a Serverless Backend</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/amazon-web-services-aws/">Amazon Web Services (AWS)</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws-iam-identity-center/">AWS IAM Identity Center</a> <a class="post-tag btn btn-outline-primary" href="/tags/single-sign-on-sso/">Single Sign-On (SSO)</a> <a class="post-tag btn btn-outline-primary" href="/tags/api-client/">API Client</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws-sam/">AWS SAM</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-cloud-platform-gcp/">Google Cloud Platform (GCP)</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-workspace-gsuite/">Google Workspace (GSuite)</a> <a class="post-tag btn btn-outline-primary" href="/tags/openvpn/">OpenVPN</a> <a class="post-tag btn btn-outline-primary" href="/tags/pritunl-vpn/">Pritunl VPN</a> <a class="post-tag btn btn-outline-primary" href="/tags/python-library/">Python Library</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/managing-enterprise-vpn-using-pritunl-api-cli/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1681747200" data-df="ll" > Apr 18, 2023 </time><h4 class="pt-0 my-2">Managing Enterprise VPN using Pritunl API CLI</h4><div class="text-muted"><p>Introduction When you are in the advanced field of system administration, you always think, â€œIs there a CLI feature for this?â€ in a scenario where simple tasks like adding or modifying having a re...</p></div></div></a></article><article class="col"> <a href="/posts/automatic-provisioning-of-aws-iam-identity-center-users-and-groups-from-google-workspace-directory-using-sso-sync/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1676044800" data-df="ll" > Feb 11, 2023 </time><h4 class="pt-0 my-2">Automatic Provisioning of AWS IAM Identity Center Users and Groups from Google Workspace Directory using SSO Sync</h4><div class="text-muted"><p>Introduction AWS IAM Identity Center supports automatic provisioning from various providers, including OneLogin, Microsoft Azure Active Directory, on-premise MS Active Directory, and other support...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/managing-enterprise-vpn-using-pritunl-api-cli/" class="btn btn-outline-primary" aria-label="Older" ><p>Managing Enterprise VPN using Pritunl API CLI</p></a><div class="btn btn-outline-primary disabled" aria-label="Newer"><p>-</p></div></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Â© <time>2025</time> <a href="https://twitter.com/nathanielvarona">Nathaniel Varona</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.4.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/amazon-web-services-aws/">Amazon Web Services (AWS)</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws-iam-identity-center/">AWS IAM Identity Center</a> <a class="post-tag btn btn-outline-primary" href="/tags/single-sign-on-sso/">Single Sign-On (SSO)</a> <a class="post-tag btn btn-outline-primary" href="/tags/api-client/">API Client</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws-sam/">AWS SAM</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-cloud-platform-gcp/">Google Cloud Platform (GCP)</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-workspace-gsuite/">Google Workspace (GSuite)</a> <a class="post-tag btn btn-outline-primary" href="/tags/openvpn/">OpenVPN</a> <a class="post-tag btn btn-outline-primary" href="/tags/pritunl-vpn/">Pritunl VPN</a> <a class="post-tag btn btn-outline-primary" href="/tags/python-library/">Python Library</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'nathanielvarona/nathanielvarona.github.io', 'data-repo-id': 'R_kgDOI9wegw', 'data-category': 'Comments', 'data-category-id': 'DIC_kwDOI9weg84CUvHZ', 'data-mapping': 'pathname', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
