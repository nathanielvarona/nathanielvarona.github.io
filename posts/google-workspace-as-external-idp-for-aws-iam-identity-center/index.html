<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Google Workspace as an external IdP for AWS IAM Identity Center" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://nathaniel.varona.me/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/" /><meta property="og:url" content="https://nathaniel.varona.me/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/" /><meta property="og:site_name" content="Nathaniel Varona" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-27T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Google Workspace as an external IdP for AWS IAM Identity Center" /><meta name="twitter:site" content="@nathanielvarona" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-08-28T12:32:23+08:00","datePublished":"2023-01-27T00:00:00+08:00","description":"Introduction","headline":"Google Workspace as an external IdP for AWS IAM Identity Center","mainEntityOfPage":{"@type":"WebPage","@id":"https://nathaniel.varona.me/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/"},"url":"https://nathaniel.varona.me/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/"}</script><title>Google Workspace as an external IdP for AWS IAM Identity Center | Nathaniel Varona</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Nathaniel Varona"><meta name="application-name" content="Nathaniel Varona"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-7S51SBJX8F"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-7S51SBJX8F'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/favicons/android-chrome-512x512.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Nathaniel Varona</a><p class="site-subtitle fst-italic mb-0">I am a DevOps and SRE focussing on Cloud Computing and Distributed Systems.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/nathanielvarona" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/nathanielvarona" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-x-twitter"></i> </a> <a href="https://www.linkedin.com/in/nathanielvarona" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Google Workspace as an external IdP for AWS IAM Identity Center</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Google Workspace as an external IdP for AWS IAM Identity Center</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1674748800" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 27, 2023 </time> </span> <span> Updated <time data-ts="1724819543" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Aug 28, 2024 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/nathanielvarona">Nathaniel Varona</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="686 words" > <em>3 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Google Workspace as an external IdP for AWS IAM Identity Center</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Google Workspace as an external IdP for AWS IAM Identity Center</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="introduction"><span class="me-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Google Workspace (formerly known as GSuite) is a typical first service for companies embracing the cloud, especially startups. Google Workspace provides out-of-the-box services like email, calendar, file storage, and user identity. Google also provides a service called Google Cloud Service (GCP) for business logic or computing workloads; however, companies prefer to use other vendor offerings.</p><p>Then here comes Amazon Web Services (AWS), one of the prominent cloud computing vendors with various service offerings. The challenge is using the user identity from Google Workspace to use Amazon Web Services (AWS).</p><p>In this post, we walk you through setting up the Google Workspace IdP for the AWS IAM Identity Center.</p><h2 id="authentication-flow-diagram"><span class="me-2">Authentication Flow Diagram</span><a href="#authentication-flow-diagram" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/authentication-flow-diagram-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/authentication-flow-diagram-dark.png" alt="Authentication Flow Diagram" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/authentication-flow-diagram-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/authentication-flow-diagram-light.png" alt="Authentication Flow Diagram" loading="lazy"></a></p><blockquote><p><em>Created with <a href="https://mermaid.js.org/intro/" target="_blank">mermaid.js</a></em></p></blockquote><h3 id="how-the-authentication-works"><span class="me-2">How the Authentication Works</span><a href="#how-the-authentication-works" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li>A user with a <code class="language-plaintext highlighter-rouge">Google Workspace</code> account opens the link <code class="language-plaintext highlighter-rouge">AWS access portal</code> URL for an <code class="language-plaintext highlighter-rouge">AWS Organization</code> with <code class="language-plaintext highlighter-rouge">AWS IAM Identity Center</code> enabled.<li>The user will be redirected to <code class="language-plaintext highlighter-rouge">Google Workspace</code> if not yet authenticated; the user will log in using the <code class="language-plaintext highlighter-rouge">Google Workspace</code> account.<li>A response created if successfully logged in and sent to <code class="language-plaintext highlighter-rouge">AWS IAM Identity Center</code> contains <code class="language-plaintext highlighter-rouge">SAML assertion</code>, the <code class="language-plaintext highlighter-rouge">Authentication, Authorization, and User Profiles</code>.<li>The response from <code class="language-plaintext highlighter-rouge">AWS IAM Identity Center</code> determines the user to use the portal, and successful login shows.<li>The user can select the <code class="language-plaintext highlighter-rouge">AWS Organization Account</code> and <code class="language-plaintext highlighter-rouge">Permission Set</code> on the <code class="language-plaintext highlighter-rouge">AWS user portal</code> page.</ol><h2 id="prepare-the-aws-iam-identity-center"><span class="me-2">Prepare the AWS IAM Identity Center</span><a href="#prepare-the-aws-iam-identity-center" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="aws-organization"><span class="me-2">AWS Organization</span><a href="#aws-organization" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For initially setting AWS Account, enable or create first the <a href="https://console.aws.amazon.com/organizations" target="_blank">AWS Organization</a>.</p><blockquote class="prompt-tip"><p>From the <strong>Account Menu</strong> <em>(upper right corner of AWS Console, which appears to be your <strong>Account Name</strong>)</em>, open the <strong>Organization</strong>.</p></blockquote><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-create-organization-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-create-organization-dark.png" alt="Create an Organization" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-create-organization-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-create-organization-light.png" alt="Create an Organization" loading="lazy"></a></p><p>If the organization successfully enabled or created, you will list your AWS Accounts; for now, we have the main account.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-created-organization-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-created-organization-dark.png" alt="Organization Created" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-created-organization-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-created-organization-light.png" alt="Organization Created" loading="lazy"></a></p><h3 id="aws-iam-identity-center"><span class="me-2">AWS IAM Identity Center</span><a href="#aws-iam-identity-center" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Enable the <a href="https://console.aws.amazon.com/singlesignon" target="_blank">AWS IAM Identity Center</a>.</p><blockquote class="prompt-tip"><p>From the <strong>Services Menu</strong> <em>(upper left corner of AWS Console, next to the <strong>AWS Logo</strong>)</em>, select <strong>Security, Identity, &amp; Compliance</strong> and open the <strong>IAM Identity Center (successor to AWS Single Sign-On)</strong></p></blockquote><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-enable-iam-identity-center-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-enable-iam-identity-center-dark.png" alt="Enable the IAM Identity Center" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-enable-iam-identity-center-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-enable-iam-identity-center-light.png" alt="Enable the IAM Identity Center" loading="lazy"></a></p><h2 id="configure-the-aws-iam-identity-center"><span class="me-2">Configure the AWS IAM Identity Center</span><a href="#configure-the-aws-iam-identity-center" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Once enabled, select the <strong>Choose your identity source</strong>.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-enabled-iam-identity-center-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-enabled-iam-identity-center-dark.png" alt="Enabled the IAM Identity Center" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-enabled-iam-identity-center-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-enabled-iam-identity-center-light.png" alt="Enabled the IAM Identity Center" loading="lazy"></a></p><h3 id="change-the-identity-source"><span class="me-2">Change the Identity Source</span><a href="#change-the-identity-source" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>By default, AWS uses the <code class="language-plaintext highlighter-rouge">Internal Identity</code> as the source.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-change-identity-source-settings-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-change-identity-source-settings-dark.png" alt="Change the IAM Identity Center Identity Source" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-change-identity-source-settings-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-change-identity-source-settings-light.png" alt="Change the IAM Identity Center Identity Source" loading="lazy"></a></p><h3 id="choose-identity-source"><span class="me-2">Choose identity source</span><a href="#choose-identity-source" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Choose the <code class="language-plaintext highlighter-rouge">External identity provider</code> as our new source.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-change-identity-source-external-source-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-change-identity-source-external-source-dark.png" alt="Choose Identity Source" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-change-identity-source-external-source-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-change-identity-source-external-source-light.png" alt="Choose Identity Source" loading="lazy"></a></p><h3 id="configure-external-identity-provider"><span class="me-2">Configure external identity provider</span><a href="#configure-external-identity-provider" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Download the <code class="language-plaintext highlighter-rouge">metadata file</code> or take note of the <code class="language-plaintext highlighter-rouge">IdP metadata</code>, as we will use it later on <code class="language-plaintext highlighter-rouge">Google Workspace Custom SAML App</code>.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-dark.png" alt="Configure external identity provider" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-light.png" alt="Configure external identity provider" loading="lazy"></a></p><blockquote class="prompt-info"><p>Let’s partially move to Google Workspace for Custom SAML App.</p></blockquote><h3 id="google-workspace-custom-saml-app"><span class="me-2">Google Workspace Custom SAML App</span><a href="#google-workspace-custom-saml-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="add-custom-saml-app"><span class="me-2">Add Custom SAML App</span><a href="#add-custom-saml-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote class="prompt-tip"><p>From the <code class="language-plaintext highlighter-rouge">Google Workspace Admin Console</code>, select the <code class="language-plaintext highlighter-rouge">Apps</code>, then open the <code class="language-plaintext highlighter-rouge">Web and mobile apps</code>.</p></blockquote><p>Select the <code class="language-plaintext highlighter-rouge">Add custom SAML</code> app from the <code class="language-plaintext highlighter-rouge">Add app</code> menu.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-add-custom-saml-app-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-add-custom-saml-app-dark.png" alt="Add Custom SAML App" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-add-custom-saml-app-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-add-custom-saml-app-light.png" alt="Add Custom SAML App" loading="lazy"></a></p><h4 id="google-app-details"><span class="me-2">Google App Details</span><a href="#google-app-details" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Provide meaningful details for the app.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-app-details-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-app-details-dark.png" alt="Custom SAML App Details" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-app-details-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-app-details-light.png" alt="Custom SAML App Details" loading="lazy"></a></p><h4 id="google-identity-provider-details"><span class="me-2">Google Identity Provider Details</span><a href="#google-identity-provider-details" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Download the <code class="language-plaintext highlighter-rouge">Google Workspace IdP metadata</code> or take note of the <code class="language-plaintext highlighter-rouge">IdP details</code> as we will use it to complete the configuration for <code class="language-plaintext highlighter-rouge">AWS external identity provider</code>.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-identity-provider-details-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-identity-provider-details-dark.png" alt="Download IdP Metadata" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-identity-provider-details-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-identity-provider-details-light.png" alt="Download IdP Metadata" loading="lazy"></a></p><h4 id="google-service-provider-details"><span class="me-2">Google Service Provider Details</span><a href="#google-service-provider-details" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>From the AWS external identity provider, downloaded IdP metadata provides the following details as our service provider.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-service-provider-details-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-service-provider-details-dark.png" alt="Service Provider Details" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-service-provider-details-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-service-provider-details-light.png" alt="Service Provider Details" loading="lazy"></a></p><h4 id="finish-the-custom-saml-app-creation"><span class="me-2">Finish the Custom SAML App Creation</span><a href="#finish-the-custom-saml-app-creation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Skip the attribute mapping and finish the custom <code class="language-plaintext highlighter-rouge">SAML App</code> creation.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-attribute-mapping-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-attribute-mapping-dark.png" alt="Finish the Custom SAML App Creation" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-attribute-mapping-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-attribute-mapping-light.png" alt="Finish the Custom SAML App Creation" loading="lazy"></a></p><h4 id="custom-saml-app-configuration"><span class="me-2">Custom SAML App Configuration</span><a href="#custom-saml-app-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Configure the application <code class="language-plaintext highlighter-rouge">User access</code>.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-user-access-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-user-access-dark.png" alt="Custom SAML App Configuration" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-user-access-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-user-access-light.png" alt="Custom SAML App Configuration" loading="lazy"></a></p><h4 id="user-access-settings"><span class="me-2">User Access Settings</span><a href="#user-access-settings" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Change the service status <code class="language-plaintext highlighter-rouge">ON for everyone</code>.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-user-access-service-status-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-user-access-service-status-dark.png" alt="User Access Settings" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-user-access-service-status-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/google-workspace-user-access-service-status-light.png" alt="User Access Settings" loading="lazy"></a></p><blockquote class="prompt-info"><p>Let’s move back to AWS’s external identity provider configuration.</p></blockquote><h3 id="finalized-the-configuration-for-the-external-identity-provider"><span class="me-2">Finalized the configuration for the external identity provider</span><a href="#finalized-the-configuration-for-the-external-identity-provider" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Provide the <code class="language-plaintext highlighter-rouge">Google Workspace Custom SAML app</code> downloaded <code class="language-plaintext highlighter-rouge">IdP Metadata</code> as our <code class="language-plaintext highlighter-rouge">AWS IdP provider</code> to establish trust.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-metadata-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-metadata-dark.png" alt="IdP Metadata" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-metadata-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-metadata-light.png" alt="IdP Metadata" loading="lazy"></a></p><h3 id="confirm-the-configuration-for-the-external-identity-provider"><span class="me-2">Confirm the configuration for the external identity provider.</span><a href="#confirm-the-configuration-for-the-external-identity-provider" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Review the changes, and confirm with <code class="language-plaintext highlighter-rouge">ACCEPT</code> to complete the change IdP source.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-confirm-change-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-confirm-change-dark.png" alt="Configure IdP" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-confirm-change-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-configure-external-identity-provider-confirm-change-light.png" alt="Configure IdP" loading="lazy"></a></p><h2 id="manage-iam-identity-center-accounts"><span class="me-2">Manage IAM Identity Center Accounts</span><a href="#manage-iam-identity-center-accounts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="groups-and-users"><span class="me-2">Groups and Users</span><a href="#groups-and-users" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To test if the External IdP setup works, create groups and users based on the Google Workspace directory.</p><h4 id="create-a-group"><span class="me-2">Create a Group</span><a href="#create-a-group" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-dark.png" alt="Create a Group" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-light.png" alt="Create a Group" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-create-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-create-dark.png" alt="Group Name" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-create-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-create-light.png" alt="Group Name" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-created-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-created-dark.png" alt="Group Created" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-created-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-groups-created-light.png" alt="Group Created" loading="lazy"></a></p><h4 id="create-a-user"><span class="me-2">Create a User</span><a href="#create-a-user" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-dark.png" alt="Create a User" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-light.png" alt="Create a User" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-create-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-create-dark.png" alt="Specify User Details" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-create-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-create-light.png" alt="Specify User Details" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-add-group-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-add-group-dark.png" alt="Add User to Group" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-add-group-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-add-group-light.png" alt="Add User to Group" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-create-review-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-create-review-dark.png" alt="Review and add user" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-create-review-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-create-review-light.png" alt="Review and add user" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-created-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-created-dark.png" alt="User created" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-created-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-users-created-light.png" alt="User created" loading="lazy"></a></p><h3 id="permission-sets"><span class="me-2">Permission Sets</span><a href="#permission-sets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Create a set of permissions to serve as a role for the group of users and the policy attached to it.</p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-create-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-create-dark.png" alt="Create Permission Set" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-create-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-create-light.png" alt="Create Permission Set" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-select-type-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-select-type-dark.png" alt="Permission Set Type" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-select-type-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-select-type-light.png" alt="Permission Set Type" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-details-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-details-dark.png" alt="Permission Set Details" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-details-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-details-light.png" alt="Permission Set Details" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-review-create-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-review-create-dark.png" alt="Permission Set Review" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-review-create-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-review-create-light.png" alt="Permission Set Review" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-created-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-created-dark.png" alt="Permission Set Created" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-created-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-permissionset-created-light.png" alt="Permission Set Created" loading="lazy"></a></p><h3 id="aws-organizations-accounts"><span class="me-2">AWS Organizations Accounts</span><a href="#aws-organizations-accounts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-dark.png" alt="Select Organization" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-light.png" alt="Select Organization" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-assign-usergroup-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-assign-usergroup-dark.png" alt="Assign users or groups" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-assign-usergroup-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-assign-usergroup-light.png" alt="Assign users or groups" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-select-group-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-select-group-dark.png" alt="Select Group" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-select-group-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-select-group-light.png" alt="Select Group" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-select-permissionset-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-select-permissionset-dark.png" alt="Select Permission Set" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-select-permissionset-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-select-permissionset-light.png" alt="Select Permission Set" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-review-submit-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-review-submit-dark.png" alt="Submit assignments" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-review-submit-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-review-submit-light.png" alt="Submit assignments" loading="lazy"></a></p><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-assiged-usergroup-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-assiged-usergroup-dark.png" alt="Organization Assignments" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-assiged-usergroup-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-manage-accounts-org-assiged-usergroup-light.png" alt="Organization Assignments" loading="lazy"></a></p><h2 id="login-to-aws-console-with-google-workspace-credential"><span class="me-2">Login to AWS Console with Google Workspace Credential</span><a href="#login-to-aws-console-with-google-workspace-credential" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>AWS access portal URL <code class="language-plaintext highlighter-rouge">https://d-xxxxxxxxxx.awsapps.com/start</code></p><h3 id="google-login"><span class="me-2">Google Login</span><a href="#google-login" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-login-google-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-login-google-dark.png" alt="Google Login" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-login-google-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-login-google-light.png" alt="Google Login" loading="lazy"></a></p><h3 id="aws-iam-identity"><span class="me-2">AWS IAM Identity</span><a href="#aws-iam-identity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-access-portal-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-access-portal-dark.png" alt="AWS IAM Identity" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-access-portal-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-access-portal-light.png" alt="AWS IAM Identity" loading="lazy"></a></p><h3 id="aws-management-console"><span class="me-2">AWS Management Console</span><a href="#aws-management-console" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-management-dark.png" class="popup img-link dark shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-management-dark.png" alt="AWS Management Console" loading="lazy"></a> <a href="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-management-light.png" class="popup img-link light shimmer"><img src="/assets/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/aws-iam-ic-console-management-light.png" alt="AWS Management Console" loading="lazy"></a></p><p>We now have a fully working External IdP provided by Google Workspace Directory for our AWS Users.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/aws/">AWS</a>, <a href="/categories/iam-identity-center/">IAM Identity Center</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/google-workspace-gsuite/" class="post-tag no-text-decoration" >Google Workspace (GSuite)</a> <a href="/tags/google-cloud-platform-gcp/" class="post-tag no-text-decoration" >Google Cloud Platform (GCP)</a> <a href="/tags/amazon-web-services-aws/" class="post-tag no-text-decoration" >Amazon Web Services (AWS)</a> <a href="/tags/single-sign-on-sso/" class="post-tag no-text-decoration" >Single Sign-On (SSO)</a> <a href="/tags/aws-iam-identity-center/" class="post-tag no-text-decoration" >AWS IAM Identity Center</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Google%20Workspace%20as%20an%20external%20IdP%20for%20AWS%20IAM%20Identity%20Center%20-%20Nathaniel%20Varona&url=https%3A%2F%2Fnathaniel.varona.me%2Fposts%2Fgoogle-workspace-as-external-idp-for-aws-iam-identity-center%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Google%20Workspace%20as%20an%20external%20IdP%20for%20AWS%20IAM%20Identity%20Center%20-%20Nathaniel%20Varona&u=https%3A%2F%2Fnathaniel.varona.me%2Fposts%2Fgoogle-workspace-as-external-idp-for-aws-iam-identity-center%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/feed/?shareActive=true&shareUrl=https%3A%2F%2Fnathaniel.varona.me%2Fposts%2Fgoogle-workspace-as-external-idp-for-aws-iam-identity-center%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/google-workspace-as-external-idp-for-aws-iam-identity-center/">Google Workspace as an external IdP for AWS IAM Identity Center</a><li class="text-truncate lh-lg"> <a href="/posts/automatic-provisioning-of-aws-iam-identity-center-users-and-groups-from-google-workspace-directory-using-sso-sync/">Automatic Provisioning of AWS IAM Identity Center Users and Groups from Google Workspace Directory using SSO Sync</a><li class="text-truncate lh-lg"> <a href="/posts/managing-aws-iam-identity-center-multi-account-permissions-using-terraform-and-github-actions/">Managing AWS IAM Identity Center Multi-Account Permissions using Terraform and GitHub Actions</a><li class="text-truncate lh-lg"> <a href="/posts/managing-enterprise-vpn-using-pritunl-api-cli/">Managing Enterprise VPN using Pritunl API CLI</a><li class="text-truncate lh-lg"> <a href="/posts/build-a-pritunl-slack-slash-commands-with-a-serverless-backend/">Build a Pritunl Slack Slash Commands with a Serverless Backend</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/amazon-web-services-aws/">Amazon Web Services (AWS)</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws-iam-identity-center/">AWS IAM Identity Center</a> <a class="post-tag btn btn-outline-primary" href="/tags/single-sign-on-sso/">Single Sign-On (SSO)</a> <a class="post-tag btn btn-outline-primary" href="/tags/api-client/">API Client</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws-sam/">AWS SAM</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-cloud-platform-gcp/">Google Cloud Platform (GCP)</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-workspace-gsuite/">Google Workspace (GSuite)</a> <a class="post-tag btn btn-outline-primary" href="/tags/openvpn/">OpenVPN</a> <a class="post-tag btn btn-outline-primary" href="/tags/pritunl-vpn/">Pritunl VPN</a> <a class="post-tag btn btn-outline-primary" href="/tags/python-library/">Python Library</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/automatic-provisioning-of-aws-iam-identity-center-users-and-groups-from-google-workspace-directory-using-sso-sync/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1676044800" data-df="ll" > Feb 11, 2023 </time><h4 class="pt-0 my-2">Automatic Provisioning of AWS IAM Identity Center Users and Groups from Google Workspace Directory using SSO Sync</h4><div class="text-muted"><p>Introduction AWS IAM Identity Center supports automatic provisioning from various providers, including OneLogin, Microsoft Azure Active Directory, on-premise MS Active Directory, and other support...</p></div></div></a></article><article class="col"> <a href="/posts/managing-aws-iam-identity-center-multi-account-permissions-using-terraform-and-github-actions/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1677772800" data-df="ll" > Mar 3, 2023 </time><h4 class="pt-0 my-2">Managing AWS IAM Identity Center Multi-Account Permissions using Terraform and GitHub Actions</h4><div class="text-muted"><p>Introduction Maintaining accounts with Terraform ensures a single source of truth about what changes we made for our principals and recommended policies based on organization guidelines. We can al...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"><div class="btn btn-outline-primary disabled" aria-label="Older"><p>-</p></div><a href="/posts/automatic-provisioning-of-aws-iam-identity-center-users-and-groups-from-google-workspace-directory-using-sso-sync/" class="btn btn-outline-primary" aria-label="Newer" ><p>Automatic Provisioning of AWS IAM Identity Center Users and Groups from Google Workspace Directory using SSO Sync</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://twitter.com/nathanielvarona">Nathaniel Varona</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.0" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/amazon-web-services-aws/">Amazon Web Services (AWS)</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws-iam-identity-center/">AWS IAM Identity Center</a> <a class="post-tag btn btn-outline-primary" href="/tags/single-sign-on-sso/">Single Sign-On (SSO)</a> <a class="post-tag btn btn-outline-primary" href="/tags/api-client/">API Client</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws-sam/">AWS SAM</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-cloud-platform-gcp/">Google Cloud Platform (GCP)</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-workspace-gsuite/">Google Workspace (GSuite)</a> <a class="post-tag btn btn-outline-primary" href="/tags/openvpn/">OpenVPN</a> <a class="post-tag btn btn-outline-primary" href="/tags/pritunl-vpn/">Pritunl VPN</a> <a class="post-tag btn btn-outline-primary" href="/tags/python-library/">Python Library</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'nathanielvarona/nathanielvarona.github.io', 'data-repo-id': 'R_kgDOI9wegw', 'data-category': 'Comments', 'data-category-id': 'DIC_kwDOI9weg84CUvHZ', 'data-mapping': 'pathname', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
